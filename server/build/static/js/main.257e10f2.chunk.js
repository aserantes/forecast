(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{219:function(e,t,a){e.exports=a(247)},247:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),i=a.n(c),l=a(10),o=a.n(l),u=a(7),s=a(27),m={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZoneName:"short",hour12:!1},f={hour:"numeric",minute:"2-digit",hour12:!1},d=function(e){var t=new Date,a=t.getTime()+6e4*t.getTimezoneOffset(),n=new Date(a+1e3*e);return new Intl.DateTimeFormat(void 0,m).format(n)},p=function(e){return new Intl.DateTimeFormat(void 0,f).format(1e3*e)},E=function(e){return"".concat(Math.round(e-273.15),"\xb0C")},h=function(e){return"".concat(Math.round(9*(e-273.15)/5+32),"\xb0F")},g=a(67),b=Object(g.a)({prefersDarkMode:!1,prefersCelcius:!0,previousCities:[]},function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(t){return}}(),{inputValue:""}),y=Object(s.c)({name:"ui",initialState:b,reducers:{toggleDarkMode:function(e){e.prefersDarkMode=!e.prefersDarkMode},toggleCelcius:function(e){e.prefersCelcius=!e.prefersCelcius},setInputValue:function(e,t){e.inputValue=t.payload},addPreviousCities:function(e,t){var a=t.payload;-1!==e.previousCities.findIndex((function(e){return e.id===a.id}))||(e.previousCities.unshift(t.payload),e.previousCities.length>5&&e.previousCities.pop())},delPreviousCity:function(e,t){var a=t.payload;e.previousCities.splice(a,1)}}}),v=y.actions,O=y.reducer,C=v.toggleDarkMode,S=v.toggleCelcius,j=v.setInputValue,x=v.addPreviousCities,w=v.delPreviousCity,k=O,T=a(31),W=a(68),N=a.n(W),I=N.a.create({baseURL:"/cities"}),D={fetchState:null,response:null,cityNameToSearch:null},M=Object(s.b)("cities/fetchCities",(function(e){return I.get("/",{params:{q:e}}).then((function(e){return e.data})).catch((function(e){return e}))})),R=Object(s.c)({name:"cities",initialState:D,reducers:{citiesReset:function(){return D},setCityNameToSearch:function(e,t){e.cityNameToSearch=t.payload}},extraReducers:(n={},Object(T.a)(n,M.fulfilled,(function(e,t){e.response=t.payload,e.fetchState="fulfilled"})),Object(T.a)(n,M.pending,(function(e){e.fetchState="pending"})),n)}),z=R.actions,L=R.reducer,P=z.citiesReset,B=z.setCityNameToSearch,V=L,G=N.a.create({baseURL:"/forecast"}),A={fetchState:null,response:null,cityIdToSearch:3433955},F=Object(s.b)("forecast/fetchForecast",(function(e){return G.get("/",{params:{id:e}}).then((function(e){return e.data})).catch((function(e){return e}))})),H=Object(s.c)({name:"forecast",initialState:A,reducers:{forecastReset:function(){return A},setCityIdToSearch:function(e,t){e.cityIdToSearch=t.payload}},extraReducers:(r={},Object(T.a)(r,F.fulfilled,(function(e,t){e.response=t.payload,e.fetchState="fulfilled"})),Object(T.a)(r,F.pending,(function(e){e.fetchState="pending"})),r)}),J=H.actions,U=H.reducer,q=(J.forecastReset,J.setCityIdToSearch),_=U,Q=Object(s.a)({reducer:{ui:k,cities:V,forecast:_}});Q.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){throw new Error("can't access localStorage")}}(Q.getState().ui)}));var X=a(207),Z=a(301),K=a(302),Y=a(303),$=a(304),ee=a(280),te=(a(246),a(33)),ae=a(273),ne=a(277),re=a(272),ce=a(279);var ie=function(){var e=Object(u.b)(),t=Object(c.useRef)(),a=Object(u.c)((function(e){return e.ui.inputValue})),n=Object(u.c)((function(e){return e.cities.fetchState})),r=Object(re.a)((function(t){a.length>1&&e(B(t))}),1e3),l=Object(te.a)(r,1)[0];return i.a.createElement(ae.a,{inputRef:t,label:"Enter city name",id:"outlined-margin-normal",variant:"outlined",fullWidth:!0,onChange:function(t){var a=t.target.value;e(j(a)),l(a)},value:a,disabled:"pending"===n,autoComplete:"off",InputProps:{endAdornment:a&&i.a.createElement(ne.a,{edge:"end",onClick:function(){e(j("")),t.current.focus()}},i.a.createElement(ce.a,null))}})},le=a(305),oe=a(289),ue=a(281),se=a(21),me=a(282),fe=a(283),de=a(284),pe=a(255),Ee=a(306),he=a(285),ge=a(286),be=a(287),ye=a(288),ve=a(34);var Oe=function(e){var t=e.data,a=t.temp,n=t.pressure,r=t.humidity,c=t.temp_min,l=t.temp_max,o=t.sunrise,s=t.sunset,m=Object(u.c)((function(e){return e.ui.prefersCelcius})),f=m?E(a):h(a),d=m?E(c):h(c),g=m?E(l):h(l);return i.a.createElement(ee.a,{container:!0},i.a.createElement(ve.a,{component:"span"},f,"\xa0"),i.a.createElement($.a,{flexGrow:1},i.a.createElement($.a,{display:"flex"},i.a.createElement(ve.a,{component:"span"},"Max:\xa0"),i.a.createElement(ve.a,{component:"span"}," ",g)),i.a.createElement(ee.a,{item:!0},i.a.createElement(ve.a,{component:"span"},"Min:\xa0"),i.a.createElement(ve.a,{component:"span"}," ",d))),i.a.createElement($.a,{flexGrow:1,display:"flex",flexDirection:"column"},i.a.createElement($.a,{display:"flex",flexDirection:"row"},i.a.createElement($.a,{fontWeight:"fontWeightBold"},"pressure:\xa0"),i.a.createElement($.a,null,n)),i.a.createElement($.a,{display:"flex",flexDirection:"row"},i.a.createElement($.a,{fontWeight:"fontWeightBold"},"humidity:\xa0"),i.a.createElement($.a,null,r,"%"))),i.a.createElement($.a,{flexGrow:1,display:"flex",flexDirection:"column"},i.a.createElement($.a,{display:"flex",flexDirection:"row"},i.a.createElement($.a,{fontWeight:"fontWeightBold"},"dawn:\xa0"),i.a.createElement($.a,null,p(o))),i.a.createElement($.a,{display:"flex",flexDirection:"row"},i.a.createElement($.a,{fontWeight:"fontWeightBold"},"dusk:\xa0"),i.a.createElement($.a,null,p(s)))))},Ce=Object(ue.a)((function(e){return{cardHeaderContent:{minWidth:"0"},cardHeaderTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:"0"},avatar:{backgroundColor:se.a.grey[400],width:e.spacing(4),height:e.spacing(4)},title:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},img:{width:"48px",height:"48px"}}}));var Se=function(e){var t=Ce(),a=e.forecast,n=a.main,r=a.name,l=a.weather,o=a.coord,u=a.sys,s=a.timezone,m=u.sunrise,f=u.sunset,p=u.country,E=Object(g.a)({},n,{sunrise:m,sunset:f}),h=l[0],b=h.main,y=h.description,v=h.icon,O=o.lon,C=o.lat,S=Object(c.useState)(!1),j=Object(te.a)(S,2),x=j[0],w=j[1],k=Object(c.useState)(!1),T=Object(te.a)(k,2),W=T[0],N=T[1],I=Object(c.useState)(!1),D=Object(te.a)(I,2),M=D[0],R=D[1],z="".concat("https://maps.googleapis.com/maps/api/staticmap","?center=").concat(C,",").concat(O,"&zoom=10&scale=1&size=568x568&maptype=hybrid&key=").concat("AIzaSyATSrlXeexQILWJpBpOehRMdeVeRowLq70");return i.a.createElement(me.a,{in:!0},i.a.createElement(fe.a,null,i.a.createElement(ee.a,{container:!0,spacing:0},i.a.createElement(ee.a,{item:!0,xs:12,sm:6},i.a.createElement(de.a,{classes:{content:t.cardHeaderContent,title:t.cardHeaderTitle},avatar:i.a.createElement(pe.a,{in:W},i.a.createElement(Ee.a,{alt:"country flag of ".concat(r),src:"https://www.countryflags.io/".concat(p,"/flat/48.png"),classes:{root:t.avatar,img:t.img},onLoad:function(){N(!0)}})),title:"Weather in ".concat(r),subheader:"".concat(p)})),i.a.createElement(ee.a,{item:!0,xs:12,sm:6},i.a.createElement(de.a,{avatar:i.a.createElement(pe.a,{in:M},i.a.createElement(Ee.a,{alt:y,src:"http://openweathermap.org/img/wn/".concat(v,"@2x.png"),classes:{root:t.avatar},onLoad:function(){R(!0)}})),title:"".concat(b," (").concat(y,")"),subheader:"".concat(d(s))}))),i.a.createElement(he.a,{light:!0,variant:"middle"}),i.a.createElement(ge.a,null,i.a.createElement(Oe,{data:E})),i.a.createElement(be.a,{in:x,timeout:"auto"},i.a.createElement(ye.a,{component:"img",src:z,onLoad:function(){w(!0)}}))))};var je=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.forecast.response})),a=Object(u.c)((function(e){return e.forecast.cityIdToSearch})),n=Object(u.c)((function(e){return e.forecast.fetchState})),r=Object(u.c)((function(e){return e.cities.cityNameToSearch}));return Object(c.useEffect)((function(){a&&e(F(a))}),[a,e]),function(){if("idle"!==n&&!r){if("fulfilled"===n)return 200===t.cod?t.coord?i.a.createElement(Se,{forecast:t}):i.a.createElement(le.a,{severity:"info"},'No forecast found for City with id "',a,'".'):i.a.createElement(le.a,{severity:"error"},t.message);if("pending"===n)return i.a.createElement(ee.a,{container:!0,justify:"center"},i.a.createElement(oe.a,null))}return null}()},xe=a(208),we=a(290),ke=a(291),Te=a(292);var We=function(e){var t=e.city,a=e.onCityClick,n=Object(ue.a)({avatar:{minWidth:"40px"},small:{height:"24px",width:"24px"},root:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"224px"}})();return i.a.createElement(we.a,{button:!0,onClick:function(){return a(t.id,t.name)}},i.a.createElement(ke.a,{classes:{root:n.avatar}},i.a.createElement(Ee.a,{className:n.small,variant:"rounded",size:"small",alt:"country flag of ".concat(t.name),src:"https://www.countryflags.io/".concat(t.country,"/shiny/24.png")})),i.a.createElement(Te.a,{disableTypography:!0,classes:{root:n.root}},t.state&&"".concat(t.state," - "),t.name))};function Ne(e){var t=e.index,a=e.style,n=e.data,r=n.cities,c=n.onCityClick,l=r[t];return i.a.createElement("div",{style:a,key:t},i.a.createElement(We,{city:l,onCityClick:c}))}var Ie=function(e){var t=e.cities,a=e.onCityClick;return i.a.createElement(xe.a,{className:"List",height:300,itemCount:t.length,itemSize:36,itemData:{cities:t,onCityClick:a}},Ne)};var De=function(){var e=Object(u.b)(),t=function(t,a){e(j(a)),e(x({id:t,name:a})),e(P()),e(q(t))},a=Object(u.c)((function(e){return e.cities.response})),n=Object(u.c)((function(e){return e.cities.cityNameToSearch})),r=Object(u.c)((function(e){return e.cities.fetchState}));return Object(c.useEffect)((function(){n&&e(M(n))}),[n,e]),function(){if("idle"!==r){if("fulfilled"===r)return a.name?i.a.createElement(le.a,{severity:"error"},a.message):a.length?i.a.createElement(Ie,{cities:a,onCityClick:t}):i.a.createElement(le.a,{severity:"info"},'No cities found using "',n,'".');if("pending"===r)return i.a.createElement(ee.a,{container:!0,justify:"center"},i.a.createElement(oe.a,null))}return null}()},Me=a(212),Re=a(293),ze=a(206),Le=a(257),Pe=a(296),Be=a(299),Ve=a(294),Ge=a(295),Ae=a(297),Fe=a(298),He=a(300),Je=a(307);var Ue=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.prefersDarkMode}));return i.a.createElement(Je.a,{checked:t,onChange:function(){e(C())},color:"default"})};var qe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.prefersCelcius}));return i.a.createElement(Je.a,{checked:t,onChange:function(){e(S())},color:"default"})},_e=Object(ue.a)((function(e){return{small:{width:e.spacing(4),height:e.spacing(4)},title:{fontSize:"18px"},dot:{margin:"4px",fontSize:"8px"},list:{minWidth:"288px"},root:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"224px"}}}));var Qe=function(){var e=_e(),t=Object(u.b)(),a=i.a.useState(null),n=Object(te.a)(a,2),r=n[0],c=n[1],l=Boolean(r),o=Object(u.c)((function(e){return e.ui.previousCities})),s=function(){c(null)};return i.a.createElement(Me.a,{position:"static",color:"primary"},i.a.createElement(Re.a,{disableGutters:!0,variant:"dense"},i.a.createElement(ne.a,{"aria-label":"menu1","aria-controls":"menu1","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)}},i.a.createElement(Ve.a,null)),i.a.createElement($.a,{fontStyle:"italic",fontWeight:"bold",className:e.title,component:"span"},"WEE"),i.a.createElement(Ge.a,{className:e.dot,color:"secondary"}),i.a.createElement($.a,{fontStyle:"italic",fontWeight:"bold",className:e.title,component:"span"},"WEATHER"),i.a.createElement(Ge.a,{className:e.dot,color:"primary"}),i.a.createElement($.a,{fontStyle:"italic",fontWeight:"bold",className:e.title,component:"span"},"APP")),i.a.createElement(ze.a,{id:"menu1",anchorEl:r,keepMounted:!0,open:l,onClose:s},i.a.createElement(Le.a,{className:e.list,subheader:i.a.createElement(Pe.a,null,"SETTINGS")},i.a.createElement(we.a,null,i.a.createElement(Te.a,null,"Dark Mode"),i.a.createElement(Ee.a,{className:e.small},i.a.createElement(Ae.a,null)),i.a.createElement(Ue,null),i.a.createElement(Ee.a,{className:e.small},i.a.createElement(Fe.a,null))),i.a.createElement(we.a,null,i.a.createElement(Te.a,null,"Temp. Unit"),i.a.createElement(Ee.a,{className:e.small,size:"small"},i.a.createElement($.a,{fontWeight:"bold",fontSize:"1.2em"},"F")),i.a.createElement(qe,null),i.a.createElement(Ee.a,{className:e.small,size:"small"},i.a.createElement($.a,{fontWeight:"bold",fontSize:"1.2em"},"C")))),o.length>0&&i.a.createElement(he.a,null)&&i.a.createElement(Le.a,{dense:!0,subheader:i.a.createElement(Pe.a,null,"PREVIOUS CITIES")},o.map((function(a,n){return i.a.createElement(we.a,{button:!0,key:a.id,onClick:function(){return e=a.name,n=a.id,t(j(e)),t(q(n)),void s();var e,n}},i.a.createElement(Te.a,{disableTypography:!0,classes:{root:e.root}},a.name),i.a.createElement(Be.a,null,i.a.createElement(ne.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){t(w(e))}(n)}},i.a.createElement(He.a,null))))})))))};var Xe=function(){var e=Object(u.c)((function(e){return e.ui.prefersDarkMode})),t=i.a.useMemo((function(){return Object(X.a)({palette:{type:e?"dark":"light"}})}),[e]);return i.a.createElement(Z.a,{theme:t},i.a.createElement(K.a,null,i.a.createElement(Y.a,{maxWidth:"sm",disableGutters:!0},i.a.createElement($.a,{m:2},i.a.createElement(ee.a,{container:!0,spacing:2},i.a.createElement(ee.a,{item:!0,xs:12},i.a.createElement(Qe,null)),i.a.createElement(ee.a,{item:!0,xs:12},i.a.createElement(ie,null)),i.a.createElement(ee.a,{item:!0,xs:12},i.a.createElement(De,null),i.a.createElement(je,null)))))))};o.a.render(i.a.createElement(u.a,{store:Q},i.a.createElement(Xe,null)),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.257e10f2.chunk.js.map