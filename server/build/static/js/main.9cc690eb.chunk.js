(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{216:function(e,t,a){e.exports=a(244)},244:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),i=a.n(c),l=a(9),o=a.n(l),u=a(7),s=a(25),m={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"2-digit",hour12:!1},f={hour:"numeric",minute:"2-digit",hour12:!1},d=function(e){var t=new Date,a=t.getTime()+6e4*t.getTimezoneOffset(),n=new Date(a+1e3*e);return new Intl.DateTimeFormat("UTC",m).format(n)},p=function(e){return new Intl.DateTimeFormat("default",f).format(1e3*e)},E=function(e){return"".concat(Math.round(e-273.15),"\xb0C")},h=function(e){return"".concat(Math.round(9*(e-273.15)/5+32),"\xb0F")},g=a(65),y=Object(g.a)({prefersDarkMode:!1,prefersCelcius:!0,previousCities:[]},function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(t){return}}(),{inputValue:""}),b=Object(s.c)({name:"ui",initialState:y,reducers:{toggleDarkMode:function(e){e.prefersDarkMode=!e.prefersDarkMode},toggleCelcius:function(e){e.prefersCelcius=!e.prefersCelcius},setInputValue:function(e,t){e.inputValue=t.payload},addPreviousCities:function(e,t){var a=t.payload;-1!==e.previousCities.findIndex((function(e){return e.id===a.id}))||(e.previousCities.unshift(t.payload),e.previousCities.length>5&&e.previousCities.pop())},delPreviousCity:function(e,t){var a=t.payload;e.previousCities.splice(a,1)}}}),v=b.actions,C=b.reducer,O=v.toggleDarkMode,S=v.toggleCelcius,x=v.setInputValue,j=v.addPreviousCities,w=v.delPreviousCity,k=C,T=a(29),N=a(66),W=a.n(N),I=W.a.create({baseURL:"/cities"}),D={fetchState:null,response:null,cityNameToSearch:null},z=Object(s.b)("cities/fetchCities",(function(e){return I.get("/",{params:{q:e}}).then((function(e){return e.data})).catch((function(e){return e}))})),M=Object(s.c)({name:"cities",initialState:D,reducers:{citiesReset:function(){return D},setCityNameToSearch:function(e,t){e.cityNameToSearch=t.payload}},extraReducers:(n={},Object(T.a)(n,z.fulfilled,(function(e,t){e.response=t.payload,e.fetchState="fulfilled"})),Object(T.a)(n,z.pending,(function(e){e.fetchState="pending"})),n)}),R=M.actions,P=M.reducer,B=R.citiesReset,L=R.setCityNameToSearch,V=P,F=W.a.create({baseURL:"/forecast"}),G={fetchState:null,response:null,cityIdToSearch:null},A=Object(s.b)("forecast/fetchForecast",(function(e){return F.get("/",{params:{id:e}}).then((function(e){return e.data})).catch((function(e){return e}))})),J=Object(s.c)({name:"forecast",initialState:G,reducers:{forecastReset:function(){return G},setCityIdToSearch:function(e,t){e.cityIdToSearch=t.payload}},extraReducers:(r={},Object(T.a)(r,A.fulfilled,(function(e,t){e.response=t.payload,e.fetchState="fulfilled"})),Object(T.a)(r,A.pending,(function(e){e.fetchState="pending"})),r)}),U=J.actions,q=J.reducer,H=(U.forecastReset,U.setCityIdToSearch),_=q,Q=Object(s.a)({reducer:{ui:k,cities:V,forecast:_}});Q.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){throw new Error("can't access localStorage")}}(Q.getState().ui)}));var X=a(298),K=a(299),Y=a(283),Z=a(203),$=a(296),ee=a(297),te=(a(243),a(78)),ae=a(270),ne=a(274),re=a(269),ce=a(276);var ie=function(){var e=Object(u.b)(),t=Object(c.useRef)(),a=Object(u.c)((function(e){return e.ui.inputValue})),n=Object(u.c)((function(e){return e.cities.fetchState})),r=Object(re.a)((function(t){a.length>1&&e(L(t))}),1e3),l=Object(te.a)(r,1)[0];return i.a.createElement(ae.a,{inputRef:t,label:"Enter city name",id:"outlined-margin-normal",variant:"outlined",fullWidth:!0,onChange:function(t){var a=t.target.value;e(x(a)),l(a)},value:a,disabled:"pending"===n,autoComplete:"off",InputProps:{endAdornment:a&&i.a.createElement(ne.a,{edge:"end",onClick:function(){e(x("")),t.current.focus()}},i.a.createElement(ce.a,null))}})},le=a(300),oe=a(284),ue=a(277),se=a(21),me=a(278),fe=a(279),de=a(301),pe=a(280),Ee=a(281),he=a(282);var ge=function(e){var t=e.data,a=t.temp,n=t.pressure,r=t.humidity,c=t.temp_min,l=t.temp_max,o=t.sunrise,s=t.sunset,m=Object(u.c)((function(e){return e.ui.prefersCelcius})),f=m?E(a):h(a),d=m?E(c):h(c),g=m?E(l):h(l);return i.a.createElement(K.a,{display:"flex",fontFamily:"Monospace"},i.a.createElement(K.a,{fontSize:"24px"},f,"\xa0"),i.a.createElement(K.a,{flexGrow:1},i.a.createElement(K.a,{display:"flex"},i.a.createElement(K.a,{color:"primary.light"},"HI:\xa0"),g),i.a.createElement(K.a,{display:"flex"},i.a.createElement(K.a,{color:"secondary.light"},"LO:\xa0"),d)),i.a.createElement(K.a,{flexGrow:1,display:"flex",flexDirection:"column"},i.a.createElement(K.a,{display:"flex",flexDirection:"row"},i.a.createElement(K.a,{fontWeight:"fontWeightBold"},"pressure:\xa0"),i.a.createElement(K.a,null,n)),i.a.createElement(K.a,{display:"flex",flexDirection:"row"},i.a.createElement(K.a,{fontWeight:"fontWeightBold"},"humidity:\xa0"),i.a.createElement(K.a,null,r,"%"))),i.a.createElement(K.a,{flexGrow:1,display:"flex",flexDirection:"column"},i.a.createElement(K.a,{display:"flex",flexDirection:"row"},i.a.createElement(K.a,{fontWeight:"fontWeightBold"},"dawn:\xa0"),i.a.createElement(K.a,null,p(o))),i.a.createElement(K.a,{display:"flex",flexDirection:"row"},i.a.createElement(K.a,{fontWeight:"fontWeightBold"},"dusk:\xa0"),i.a.createElement(K.a,null,p(s)))))},ye=Object(ue.a)((function(){return{avatar:{backgroundColor:se.a.grey[400]}}}));var be=function(e){var t=ye(),a=e.forecast,n=a.main,r=a.name,c=a.weather,l=a.coord,o=a.sys,u=a.timezone,s=o.sunrise,m=o.sunset,f=o.country,p=Object(g.a)({},n,{sunrise:s,sunset:m}),E=c[0],h=E.main,y=E.description,b=E.icon,v=l.lon,C=l.lat,O="".concat("https://maps.googleapis.com/maps/api/staticmap","?center=").concat(C,",").concat(v,"&zoom=10&scale=1&size=520x300&maptype=hybrid&key=").concat("AIzaSyATSrlXeexQILWJpBpOehRMdeVeRowLq70");return i.a.createElement(me.a,null,i.a.createElement(fe.a,{avatar:i.a.createElement(de.a,{alt:y,src:"http://openweathermap.org/img/wn/".concat(b,"@2x.png"),className:t.avatar}),title:"Weather in ".concat(r," (").concat(f,")"),subheader:"".concat(h," (").concat(y,") \u2022 Local Time: ").concat(d(u))}),i.a.createElement(pe.a,{light:!0,variant:"middle"}),i.a.createElement(Ee.a,null,i.a.createElement(ge,{data:p})),i.a.createElement(he.a,{component:"img",src:O}))};var ve=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.forecast.response})),a=Object(u.c)((function(e){return e.forecast.cityIdToSearch})),n=Object(u.c)((function(e){return e.forecast.fetchState})),r=Object(u.c)((function(e){return e.cities.cityNameToSearch}));return Object(c.useEffect)((function(){a&&e(A(a))}),[a,e]),function(){if("idle"!==n&&!r){if("fulfilled"===n)return 200===t.cod?t.coord?i.a.createElement(be,{forecast:t}):i.a.createElement(le.a,{severity:"info"},'No forecast found for City with id "',a,'".'):i.a.createElement(le.a,{severity:"error"},t.message);if("pending"===n)return i.a.createElement(Y.a,{container:!0,justify:"center"},i.a.createElement(oe.a,null))}return null}()},Ce=a(204),Oe=a(285),Se=a(286),xe=a(287);var je=function(e){var t=e.city,a=e.onCityClick,n=Object(ue.a)({avatar:{minWidth:"40px"},small:{height:"24px",width:"24px"},root:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"224px"}})();return i.a.createElement(Oe.a,{button:!0,onClick:function(){return a(t.id,t.name)}},i.a.createElement(Se.a,{classes:{root:n.avatar}},i.a.createElement(de.a,{className:n.small,variant:"rounded",size:"small",alt:"country flag of ".concat(t.name),src:"https://www.countryflags.io/".concat(t.country,"/shiny/24.png")})),i.a.createElement(xe.a,{disableTypography:!0,classes:{root:n.root}},t.state&&"".concat(t.state," - "),t.name))};function we(e){var t=e.index,a=e.style,n=e.data,r=n.cities,c=n.onCityClick,l=r[t];return i.a.createElement("div",{style:a,key:t},i.a.createElement(je,{city:l,onCityClick:c}))}var ke=function(e){var t=e.cities,a=e.onCityClick;return i.a.createElement(Ce.a,{className:"List",height:300,itemCount:t.length,itemSize:36,itemData:{cities:t,onCityClick:a}},we)};var Te=function(){var e=Object(u.b)(),t=function(t,a){e(x(a)),e(j({id:t,name:a})),e(B()),e(H(t))},a=Object(u.c)((function(e){return e.cities.response})),n=Object(u.c)((function(e){return e.cities.cityNameToSearch})),r=Object(u.c)((function(e){return e.cities.fetchState}));return Object(c.useEffect)((function(){n&&e(z(n))}),[n,e]),function(){if("idle"!==r){if("fulfilled"===r)return a.name?i.a.createElement(le.a,{severity:"error"},a.message):a.length?i.a.createElement(ke,{cities:a,onCityClick:t}):i.a.createElement(le.a,{severity:"info"},'No cities found using "',n,'".');if("pending"===r)return i.a.createElement(Y.a,{container:!0,justify:"center"},i.a.createElement(oe.a,null))}return null}()},Ne=a(208),We=a(288),Ie=a(202),De=a(253),ze=a(291),Me=a(294),Re=a(289),Pe=a(290),Be=a(292),Le=a(293),Ve=a(295),Fe=a(302);var Ge=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.prefersDarkMode}));return i.a.createElement(Fe.a,{checked:t,onChange:function(){e(O())},color:"default"})};var Ae=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.prefersCelcius}));return i.a.createElement(Fe.a,{checked:t,onChange:function(){e(S())},color:"default"})},Je=Object(ue.a)((function(e){return{small:{width:e.spacing(4),height:e.spacing(4)},title:{fontSize:"18px"},dot:{margin:"4px",fontSize:"8px"},list:{minWidth:"288px"},root:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"224px"}}}));var Ue=function(){var e=Je(),t=Object(u.b)(),a=i.a.useState(null),n=Object(te.a)(a,2),r=n[0],c=n[1],l=Boolean(r),o=Object(u.c)((function(e){return e.ui.previousCities})),s=function(){c(null)};return i.a.createElement(Ne.a,{position:"static",color:"primary"},i.a.createElement(We.a,{disableGutters:!0},i.a.createElement(ne.a,{"aria-label":"menu1","aria-controls":"menu1","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)}},i.a.createElement(Re.a,null)),i.a.createElement(K.a,{fontStyle:"italic",fontWeight:"bold",className:e.title,component:"span"},"WEE"),i.a.createElement(Pe.a,{className:e.dot,color:"secondary"}),i.a.createElement(K.a,{fontStyle:"italic",fontWeight:"bold",className:e.title,component:"span"},"WEATHER"),i.a.createElement(Pe.a,{className:e.dot,color:"primary"}),i.a.createElement(K.a,{fontStyle:"italic",fontWeight:"bold",className:e.title,component:"span"},"APP")),i.a.createElement(Ie.a,{id:"menu1",anchorEl:r,keepMounted:!0,open:l,onClose:s},i.a.createElement(De.a,{subheader:i.a.createElement(ze.a,null,"SETTINGS")},i.a.createElement(Oe.a,null,i.a.createElement(xe.a,null,"Dark Mode"),i.a.createElement(de.a,{className:e.small},i.a.createElement(Be.a,null)),i.a.createElement(Ge,null),i.a.createElement(de.a,{className:e.small},i.a.createElement(Le.a,null))),i.a.createElement(Oe.a,null,i.a.createElement(xe.a,null,"Temp. Unit"),i.a.createElement(de.a,{className:e.small,size:"small"},i.a.createElement(K.a,{fontWeight:"bold",fontSize:"1.2em"},"F")),i.a.createElement(Ae,null),i.a.createElement(de.a,{className:e.small,size:"small"},i.a.createElement(K.a,{fontWeight:"bold",fontSize:"1.2em"},"C")))),o.length>0&&i.a.createElement(pe.a,null)&&i.a.createElement(De.a,{dense:!0,subheader:i.a.createElement(ze.a,null,"PREVIOUS CITIES")},o.map((function(a,n){return i.a.createElement(Oe.a,{button:!0,key:a.id,onClick:function(){return e=a.name,n=a.id,t(x(e)),t(H(n)),void s();var e,n}},i.a.createElement(xe.a,{disableTypography:!0,classes:{root:e.root}},a.name),i.a.createElement(Me.a,null,i.a.createElement(ne.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){t(w(e))}(n)}},i.a.createElement(Ve.a,null))))})))))};var qe=function(){var e=Object(u.c)((function(e){return e.ui.prefersDarkMode})),t=i.a.useMemo((function(){return Object(Z.a)({palette:{type:e?"dark":"light"}})}),[e]);return i.a.createElement($.a,{theme:t},i.a.createElement(ee.a,null,i.a.createElement(X.a,{maxWidth:"sm",disableGutters:!0},i.a.createElement(K.a,{m:2},i.a.createElement(Y.a,{container:!0,spacing:2},i.a.createElement(Y.a,{item:!0,xs:12},i.a.createElement(Ue,null)),i.a.createElement(Y.a,{item:!0,xs:12},i.a.createElement(ie,null)),i.a.createElement(Y.a,{item:!0,xs:12},i.a.createElement(Te,null),i.a.createElement(ve,null)))))))};o.a.render(i.a.createElement(u.a,{store:Q},i.a.createElement(qe,null)),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.9cc690eb.chunk.js.map