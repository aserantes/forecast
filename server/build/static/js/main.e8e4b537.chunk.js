(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{219:function(e,t,a){e.exports=a(247)},247:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),i=a.n(c),l=a(10),o=a.n(l),u=a(7),s=a(28),m={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZoneName:"short",hour12:!1},f={hour:"numeric",minute:"2-digit",hour12:!1},d=function(e){var t=new Date,a=t.getTime()+6e4*t.getTimezoneOffset(),n=new Date(a+1e3*e);return new Intl.DateTimeFormat(void 0,m).format(n)},p=function(e){return new Intl.DateTimeFormat(void 0,f).format(1e3*e)},E=function(e){return"".concat(Math.round(e-273.15),"\xb0C")},h=function(e){return"".concat(Math.round(9*(e-273.15)/5+32),"\xb0F")},g=a(67),b=Object(g.a)({prefersDarkMode:!1,prefersCelcius:!0,previousCities:[]},function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(t){return}}(),{inputValue:""}),y=Object(s.c)({name:"ui",initialState:b,reducers:{toggleDarkMode:function(e){e.prefersDarkMode=!e.prefersDarkMode},toggleCelcius:function(e){e.prefersCelcius=!e.prefersCelcius},setInputValue:function(e,t){e.inputValue=t.payload},addPreviousCities:function(e,t){var a=t.payload;-1!==e.previousCities.findIndex((function(e){return e.id===a.id}))||(e.previousCities.unshift(t.payload),e.previousCities.length>5&&e.previousCities.pop())},delPreviousCity:function(e,t){var a=t.payload;e.previousCities.splice(a,1)}}}),v=y.actions,O=y.reducer,C=v.toggleDarkMode,j=v.toggleCelcius,S=v.setInputValue,x=v.addPreviousCities,w=v.delPreviousCity,k=O,T=a(32),W=a(68),N=a.n(W),D=N.a.create({baseURL:"/cities"}),I={fetchState:null,response:null,cityNameToSearch:null},M=Object(s.b)("cities/fetchCities",(function(e){return D.get("/",{params:{q:e}}).then((function(e){return e.data})).catch((function(e){return e}))})),z=Object(s.c)({name:"cities",initialState:I,reducers:{citiesReset:function(){return I},setCityNameToSearch:function(e,t){e.cityNameToSearch=t.payload}},extraReducers:(n={},Object(T.a)(n,M.fulfilled,(function(e,t){e.response=t.payload,e.fetchState="fulfilled"})),Object(T.a)(n,M.pending,(function(e){e.fetchState="pending"})),n)}),R=z.actions,L=z.reducer,P=R.citiesReset,B=R.setCityNameToSearch,V=L,G=N.a.create({baseURL:"/forecast"}),A={fetchState:null,response:null,cityIdToSearch:3433955},F=Object(s.b)("forecast/fetchForecast",(function(e){return G.get("/",{params:{id:e}}).then((function(e){return e.data})).catch((function(e){return e}))})),H=Object(s.c)({name:"forecast",initialState:A,reducers:{forecastReset:function(){return A},setCityIdToSearch:function(e,t){e.cityIdToSearch=t.payload}},extraReducers:(r={},Object(T.a)(r,F.fulfilled,(function(e,t){e.response=t.payload,e.fetchState="fulfilled"})),Object(T.a)(r,F.pending,(function(e){e.fetchState="pending"})),r)}),J=H.actions,U=H.reducer,q=(J.forecastReset,J.setCityIdToSearch),_=U,Q=Object(s.a)({reducer:{ui:k,cities:V,forecast:_}});Q.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){throw new Error("can't access localStorage")}}(Q.getState().ui)}));var X=a(207),Z=a(301),K=a(302),Y=a(282),$=a(303),ee=a(304),te=a(280),ae=(a(246),a(27)),ne=a(273),re=a(277),ce=a(272),ie=a(279);var le=function(){var e=Object(u.b)(),t=Object(c.useRef)(),a=Object(u.c)((function(e){return e.ui.inputValue})),n=Object(u.c)((function(e){return e.cities.fetchState})),r=Object(ce.a)((function(t){a.length>1&&e(B(t))}),1e3),l=Object(ae.a)(r,1)[0];return i.a.createElement(ne.a,{inputRef:t,label:"Enter city name",id:"outlined-margin-normal",variant:"outlined",fullWidth:!0,onChange:function(t){var a=t.target.value;e(S(a)),l(a)},value:a,disabled:"pending"===n,autoComplete:"off",InputProps:{endAdornment:a&&i.a.createElement(re.a,{edge:"end",onClick:function(){e(S("")),t.current.focus()}},i.a.createElement(ie.a,null))}})},oe=a(305),ue=a(255),se=a(289),me=a(281),fe=a(21),de=a(283),pe=a(284),Ee=a(306),he=a(285),ge=a(286),be=a(287),ye=a(288),ve=a(34);var Oe=function(e){var t=e.data,a=t.temp,n=t.pressure,r=t.humidity,c=t.temp_min,l=t.temp_max,o=t.sunrise,s=t.sunset,m=Object(u.c)((function(e){return e.ui.prefersCelcius})),f=m?E(a):h(a),d=m?E(c):h(c),g=m?E(l):h(l);return i.a.createElement(te.a,{container:!0},i.a.createElement(ve.a,{component:"span"},f,"\xa0"),i.a.createElement(ee.a,{flexGrow:1},i.a.createElement(ee.a,{display:"flex"},i.a.createElement(ve.a,{component:"span"},"Max:\xa0"),i.a.createElement(ve.a,{component:"span"}," ",g)),i.a.createElement(te.a,{item:!0},i.a.createElement(ve.a,{component:"span"},"Min:\xa0"),i.a.createElement(ve.a,{component:"span"}," ",d))),i.a.createElement(ee.a,{flexGrow:1,display:"flex",flexDirection:"column"},i.a.createElement(ee.a,{display:"flex",flexDirection:"row"},i.a.createElement(ee.a,{fontWeight:"fontWeightBold"},"pressure:\xa0"),i.a.createElement(ee.a,null,n)),i.a.createElement(ee.a,{display:"flex",flexDirection:"row"},i.a.createElement(ee.a,{fontWeight:"fontWeightBold"},"humidity:\xa0"),i.a.createElement(ee.a,null,r,"%"))),i.a.createElement(ee.a,{flexGrow:1,display:"flex",flexDirection:"column"},i.a.createElement(ee.a,{display:"flex",flexDirection:"row"},i.a.createElement(ee.a,{fontWeight:"fontWeightBold"},"dawn:\xa0"),i.a.createElement(ee.a,null,p(o))),i.a.createElement(ee.a,{display:"flex",flexDirection:"row"},i.a.createElement(ee.a,{fontWeight:"fontWeightBold"},"dusk:\xa0"),i.a.createElement(ee.a,null,p(s)))))},Ce=Object(me.a)((function(e){return{cardHeaderContent:{minWidth:"0"},cardHeaderTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:"0"},avatar:{backgroundColor:fe.a.grey[400],width:e.spacing(4),height:e.spacing(4)},title:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}));var je=function(e){var t=Ce(),a=e.forecast,n=a.main,r=a.name,l=a.weather,o=a.coord,u=a.sys,s=a.timezone,m=a.extraData,f=m.name,p=m.flag,E=m.region,h=m.subregion,b=u.sunrise,y=u.sunset,v=Object(g.a)({},n,{sunrise:b,sunset:y,flag:p,region:E,subregion:h}),O=l[0],C=O.main,j=O.description,S=O.icon,x=o.lon,w=o.lat,k=Object(c.useState)(!1),T=Object(ae.a)(k,2),W=T[0],N=T[1],D=Object(c.useState)(!1),I=Object(ae.a)(D,2),M=I[0],z=I[1],R=Object(c.useState)(!1),L=Object(ae.a)(R,2),P=L[0],B=L[1],V="".concat("https://maps.googleapis.com/maps/api/staticmap","?center=").concat(w,",").concat(x,"&zoom=10&scale=1&size=568x568&maptype=hybrid&key=").concat("AIzaSyATSrlXeexQILWJpBpOehRMdeVeRowLq70");return i.a.createElement(Y.a,{in:!0},i.a.createElement(de.a,null,i.a.createElement(te.a,{container:!0,spacing:0},i.a.createElement(te.a,{item:!0,xs:12,sm:6},i.a.createElement(pe.a,{classes:{content:t.cardHeaderContent,title:t.cardHeaderTitle},avatar:i.a.createElement(Y.a,{in:M},i.a.createElement(Ee.a,{alt:"country flag of ".concat(r),src:p,classes:{root:t.avatar},onLoad:function(){z(!0)}})),title:"Weather in ".concat(r),subheader:"".concat(f)})),i.a.createElement(te.a,{item:!0,xs:12,sm:6},i.a.createElement(pe.a,{avatar:i.a.createElement(Y.a,{in:P},i.a.createElement(Ee.a,{alt:j,src:"http://openweathermap.org/img/wn/".concat(S,"@2x.png"),classes:{root:t.avatar},onLoad:function(){B(!0)}})),title:"".concat(C," (").concat(j,")"),subheader:"".concat(d(s))}))),i.a.createElement(he.a,{light:!0,variant:"middle"}),i.a.createElement(ge.a,null,i.a.createElement(Oe,{data:v})),i.a.createElement(be.a,{in:W,timeout:"auto"},i.a.createElement(ye.a,{component:"img",src:V,onLoad:function(){N(!0)}}))))};var Se=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.forecast.response})),a=Object(u.c)((function(e){return e.forecast.cityIdToSearch})),n=Object(u.c)((function(e){return e.forecast.fetchState})),r=Object(u.c)((function(e){return e.cities.cityNameToSearch}));return Object(c.useEffect)((function(){a&&e(F(a))}),[a,e]),function(){if("idle"!==n&&!r){if("fulfilled"===n)return 200===t.cod?t.coord?i.a.createElement(je,{forecast:t}):i.a.createElement(Y.a,{in:!0},i.a.createElement(oe.a,{severity:"info"},'No forecast found for City with id "',a,'".')):i.a.createElement(Y.a,{in:!0},i.a.createElement(oe.a,{severity:"error"},t.message));if("pending"===n)return i.a.createElement(ue.a,{in:!0},i.a.createElement(te.a,{container:!0,justify:"center"},i.a.createElement(se.a,null)))}return null}()},xe=a(208),we=a(290),ke=a(291),Te=a(292);var We=function(e){var t=e.city,a=e.onCityClick,n=Object(c.useState)(!1),r=Object(ae.a)(n,2),l=r[0],o=r[1],u=Object(me.a)({avatar:{minWidth:"40px"},small:{height:"24px",width:"24px"},root:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"224px"}})();return i.a.createElement(Y.a,{in:!0},i.a.createElement(we.a,{button:!0,onClick:function(){return a(t.id,t.name)}},i.a.createElement(ke.a,{classes:{root:u.avatar}},i.a.createElement(Y.a,{in:l},i.a.createElement(Ee.a,{className:u.small,variant:"rounded",size:"small",alt:"country flag of ".concat(t.name),src:"https://www.countryflags.io/".concat(t.country,"/shiny/24.png"),onLoad:function(){return o(!0)}}))),i.a.createElement(Te.a,{disableTypography:!0,classes:{root:u.root}},t.state&&"".concat(t.state," - "),t.name)))};function Ne(e){var t=e.index,a=e.style,n=e.data,r=n.cities,c=n.onCityClick,l=r[t];return i.a.createElement("div",{style:a,key:t},i.a.createElement(We,{city:l,onCityClick:c}))}var De=function(e){var t=e.cities,a=e.onCityClick;return i.a.createElement(xe.a,{className:"List",height:300,itemCount:t.length,itemSize:36,itemData:{cities:t,onCityClick:a}},Ne)};var Ie=function(){var e=Object(u.b)(),t=function(t,a){e(S(a)),e(x({id:t,name:a})),e(P()),e(q(t))},a=Object(u.c)((function(e){return e.cities.response})),n=Object(u.c)((function(e){return e.cities.cityNameToSearch})),r=Object(u.c)((function(e){return e.cities.fetchState}));return Object(c.useEffect)((function(){n&&e(M(n))}),[n,e]),function(){if("idle"!==r){if("fulfilled"===r)return a.name?i.a.createElement(Y.a,{in:!0},i.a.createElement(oe.a,{severity:"error"},a.message)):a.length?i.a.createElement(De,{cities:a,onCityClick:t}):i.a.createElement(Y.a,{in:!0},i.a.createElement(oe.a,{severity:"info"},'No cities found using "',n,'".'));if("pending"===r)return i.a.createElement(ue.a,{in:!0},i.a.createElement(te.a,{container:!0,justify:"center"},i.a.createElement(se.a,null)))}return null}()},Me=a(212),ze=a(293),Re=a(206),Le=a(257),Pe=a(296),Be=a(299),Ve=a(294),Ge=a(295),Ae=a(297),Fe=a(298),He=a(300),Je=a(307);var Ue=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.prefersDarkMode}));return i.a.createElement(Je.a,{checked:t,onChange:function(){e(C())},color:"default"})};var qe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.ui.prefersCelcius}));return i.a.createElement(Je.a,{checked:t,onChange:function(){e(j())},color:"default"})},_e=Object(me.a)((function(e){return{small:{width:e.spacing(4),height:e.spacing(4)},dot:{margin:"4px",fontSize:"8px"},list:{minWidth:"288px"},root:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"224px"}}}));var Qe=function(){var e=_e(),t=Object(u.b)(),a=i.a.useState(null),n=Object(ae.a)(a,2),r=n[0],c=n[1],l=Boolean(r),o=Object(u.c)((function(e){return e.ui.previousCities})),s=function(){c(null)};return i.a.createElement(Me.a,{position:"static",color:"primary"},i.a.createElement(ze.a,{disableGutters:!0,variant:"dense"},i.a.createElement(re.a,{"aria-label":"menu1","aria-controls":"menu1","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)}},i.a.createElement(Ve.a,null)),i.a.createElement(Ge.a,{className:e.dot,color:"secondary"}),i.a.createElement(ee.a,{fontWeight:"bold",fontStyle:"italic",fontSize:"18px",component:"span"},"WEATHER"),i.a.createElement(Ge.a,{className:e.dot,color:"disabled"}),i.a.createElement(ee.a,{fontWeight:"bold",fontStyle:"italic",fontSize:"18px",component:"span"},"APP"),i.a.createElement(Ge.a,{className:e.dot,color:"primary"})),i.a.createElement(Re.a,{id:"menu1",anchorEl:r,keepMounted:!0,open:l,onClose:s},i.a.createElement(Le.a,{className:e.list,subheader:i.a.createElement(Pe.a,null,"SETTINGS")},i.a.createElement(we.a,null,i.a.createElement(Te.a,null,"Dark Mode"),i.a.createElement(Ee.a,{className:e.small},i.a.createElement(Ae.a,null)),i.a.createElement(Ue,null),i.a.createElement(Ee.a,{className:e.small},i.a.createElement(Fe.a,null))),i.a.createElement(we.a,null,i.a.createElement(Te.a,null,"Temp. Unit"),i.a.createElement(Ee.a,{className:e.small,size:"small"},i.a.createElement(ee.a,{fontWeight:"bold",fontSize:"1.2em"},"F")),i.a.createElement(qe,null),i.a.createElement(Ee.a,{className:e.small,size:"small"},i.a.createElement(ee.a,{fontWeight:"bold",fontSize:"1.2em"},"C")))),o.length>0&&i.a.createElement(he.a,null)&&i.a.createElement(Le.a,{dense:!0,subheader:i.a.createElement(Pe.a,null,"PREVIOUS CITIES")},o.map((function(a,n){return i.a.createElement(we.a,{button:!0,key:a.id,onClick:function(){return e=a.name,n=a.id,t(S(e)),t(q(n)),void s();var e,n}},i.a.createElement(Te.a,{disableTypography:!0,classes:{root:e.root}},a.name),i.a.createElement(Be.a,null,i.a.createElement(re.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e){t(w(e))}(n)}},i.a.createElement(He.a,null))))})))))};var Xe=function(){var e=Object(u.c)((function(e){return e.ui.prefersDarkMode})),t=i.a.useMemo((function(){return Object(X.a)({palette:{type:e?"dark":"light"}})}),[e]);return i.a.createElement(Z.a,{theme:t},i.a.createElement(K.a,null,i.a.createElement(Y.a,{in:!0},i.a.createElement($.a,{maxWidth:"sm",disableGutters:!0},i.a.createElement(ee.a,{m:2},i.a.createElement(te.a,{container:!0,spacing:2},i.a.createElement(te.a,{item:!0,xs:12},i.a.createElement(Qe,null)),i.a.createElement(te.a,{item:!0,xs:12},i.a.createElement(le,null)),i.a.createElement(te.a,{item:!0,xs:12},i.a.createElement(Ie,null),i.a.createElement(Se,null))))))))};o.a.render(i.a.createElement(u.a,{store:Q},i.a.createElement(Xe,null)),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.e8e4b537.chunk.js.map